!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openmct=t():e.openmct=t()}(this,(()=>{return e={},function(){var e={subscribe:function(e){var r=e.data,o=Date.now(),u=1e3/r.dataRateInHz,c=o-o%u+u;let m;m=r.spectra?function(t){for(;c<t;){const t=Object.create(e);e.data.start=c-6e4,e.data.end=c,a(t),c+=u}return c}:function(t){for(;c<t;)self.postMessage({id:e.id,data:{name:r.name,utc:c,yesterday:c-864e5,sin:i(c,r.period,r.amplitude,r.offset,r.phase,r.randomness,r.infinityValues,r.exceedFloat32),wavelengths:d(),intensities:f(),cos:s(c,r.period,r.amplitude,r.offset,r.phase,r.randomness,r.infinityValues,r.exceedFloat32)}}),c+=u;return c},t[e.id]=m,n()},unsubscribe:function(e){delete t[e.data.id]},request:a},t={};function n(e){var a=Date.now(),r=Math.min.apply(Math,Object.values(t).map((function(e){return e(a)})))-a;r<0&&(r=0),Number.isFinite(r)&&setTimeout(n,r)}function a(e){var t=e.data;void 0===t.end&&(t.end=Date.now()),void 0===t.start&&(t.start=t.end-9e5);var n=Date.now(),a=t.start,s=t.end>n?n:t.end,i=t.period,u=t.dataRateInHz,d=Math.max(t.loadDelay,0),f=t.size,c=s-a,m=1e3/u,l=Math.floor(c/m),h=a-a%m+m,p=[];if("minmax"===t.strategy&&f){var M=Math.min(Math.floor(f/2),Math.floor(c/i));for(let e=0;e<M;e++){let n=a+c/M*e,o=n,s=n+i/2;p.push(r(o,t),r(s,t))}}else for(let e=0;e<l&&h<s;e++,h+=m)p.push(r(h,t));"minmax"!==t.strategy&&f&&(p=p.slice(-f)),0===d?o(e,t,p):setTimeout((()=>o(e,t,p)),d)}function r(e,t){return{utc:e,yesterday:e-864e5,sin:i(e,t.period,t.amplitude,t.offset,t.phase,t.randomness,t.infinityValues,t.exceedFloat32),wavelengths:d(),intensities:f(),cos:s(e,t.period,t.amplitude,t.offset,t.phase,t.randomness,t.infinityValues,t.exceedFloat32)}}function o(e,t,n){self.postMessage({id:e.id,data:t.spectra?{wavelength:n.map((e=>e.wavelength)),cos:n.map((e=>e.cos))}:n})}function s(e,t,n,a,r,o,s,i){if(s&&i){if(Math.random()>.5)return Number.POSITIVE_INFINITY;if(Math.random()<.01)return u()}else{if(s&&Math.random()>.5)return Number.POSITIVE_INFINITY;if(i&&Math.random()<.01)return u()}return n*Math.cos(r+e/t/1e3*Math.PI*2)+n*Math.random()*o+a}function i(e,t,n,a,r,o,s,i){if(s&&i){if(Math.random()>.5)return Number.POSITIVE_INFINITY;if(Math.random()<.01)return u()}else{if(s&&Math.random()>.5)return Number.POSITIVE_INFINITY;if(i&&Math.random()<.01)return u()}return n*Math.sin(r+e/t/1e3*Math.PI*2)+n*Math.random()*o+a}function u(){return 34e38*(Math.random()>.5?1:-1)}function d(){let e=[];for(;e.length<5;){const t=100*Math.random();e.includes(t)||e.push(String(t))}return e}function f(){let e=[];for(;e.length<5;){const t=10*Math.random();e.includes(t)||e.push(String(t))}return e}function c(e,t){self.postMessage({error:e.name+": "+e.message,message:t,id:t.id})}self.onmessage=function(t){var n=t.data,a=e[n.request];if(a)try{a(n)}catch(e){c(e,n)}else c(new Error("unknown message type"),n)}}(),e.default;var e}));
//# sourceMappingURL=generatorWorker.js.map